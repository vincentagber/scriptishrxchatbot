(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80380,e=>{"use strict";let t=(0,e.i(35884).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],80380)},99325,e=>{"use strict";function t(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=t);return a}e.s(["clsx",()=>t])},60954,26550,e=>{"use strict";let t=(0,e.i(35884).default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);e.s(["Mic",()=>t],60954);var s=e.i(48277),a=e.i(30668),r=e.i(41428);let l=a.forwardRef(({className:e,type:t,...a},l)=>(0,s.jsx)("input",{type:t,className:(0,r.cn)("flex h-12 w-full rounded-xl glass bg-white/5 px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-start/50 disabled:cursor-not-allowed disabled:opacity-50 text-white placeholder:text-white/40",e),ref:l,...a}));l.displayName="Input",e.s(["Input",()=>l],26550)},49449,e=>{"use strict";let t=(0,e.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],49449)},99507,e=>{"use strict";let t=(0,e.i(35884).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>t],99507)},10459,e=>{"use strict";let t=(0,e.i(35884).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],10459)},39736,e=>{"use strict";var t=e.i(39057),s=e.i(48277),a=e.i(30668),r=e.i(35884);let l=(0,r.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var i=e.i(99507),o=e.i(80380),n=e.i(10459),d=e.i(60954);let c=(0,r.default)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]);var h=e.i(49449),m=e.i(41428),u=e.i(9693),x=e.i(26550);let f=t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function p({tenantId:e,token:r,isDashboard:p=!1}){let[y,g]=(0,a.useState)([]),[b,w]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[M,I]=(0,a.useState)(!1),[A,S]=(0,a.useState)(!1),B=(0,a.useRef)(null);(0,a.useEffect)(()=>{B.current?.scrollIntoView({behavior:"smooth"})},[y]),(0,a.useEffect)(()=>{T(),C()},[]);let T=async()=>{try{let e={};r&&(e.Authorization=`Bearer ${r}`);let t=await fetch(`${f}/api/chat/status`,{headers:e}),s=await t.json();s.success&&(k(!0===s.mockMode),S("online"===s.status))}catch(e){console.error("Error checking chat status:",e),S(!1)}},C=async()=>{try{let e={};r&&(e.Authorization=`Bearer ${r}`);let t=await fetch(`${f}/api/chat/history`,{headers:e});if(t.ok){let e=await t.json();e.success&&e.messages&&Array.isArray(e.messages)&&g(e.messages)}}catch(e){console.error("Error fetching chat history:",e)}},D=async s=>{if(s&&s.preventDefault(),!b.trim()||v)return;let a=b.trim();w(""),j(!0);let l={id:`temp_${Date.now()}`,role:"user",content:a,timestamp:new Date().toISOString()};g(e=>[...e,l]);try{let s=t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:5000",l=e||t.default.env.NEXT_PUBLIC_LANDING_TENANT_ID,i={"Content-Type":"application/json"};r&&(i.Authorization=`Bearer ${r}`);let o=await fetch(`${s}/api/chat/message`,{method:"POST",headers:i,body:JSON.stringify({message:a,tenantId:l||"default"})}),n=await o.json();if(n.success&&n.response){let e={id:`assistant_${Date.now()}`,role:"assistant",content:n.response,timestamp:new Date().toISOString(),mockMode:n.mockMode};g(t=>[...t,e])}else throw Error(n.error||"Failed to get response")}catch(t){console.error("Error sending message:",t);let e={id:`error_${Date.now()}`,role:"assistant",content:"Hello! I am your AI Business Concierge. I can help with bookings, client management, or analytics. How can I assist you today?",timestamp:new Date().toISOString(),error:!0};g(t=>[...t,e])}finally{j(!1)}},E=async()=>{if(confirm("Are you sure you want to clear the chat history?"))try{let e={};r&&(e.Authorization=`Bearer ${r}`);let t=await fetch(`${f}/api/chat/history`,{method:"DELETE",headers:e}),s=await t.json();t.ok&&s.success&&g([])}catch(e){console.error("Error clearing history:",e)}};return(0,s.jsxs)("div",{className:(0,m.cn)("flex flex-col w-full bg-white md:rounded-3xl shadow-sm border border-slate-100 overflow-hidden font-sans",p?"h-[calc(100vh-8rem)]":"h-[500px]"),children:[(0,s.jsxs)("div",{className:(0,m.cn)("p-4 border-b border-slate-100 flex items-center justify-between",p?"bg-white/50 backdrop-blur-sm px-6 py-4":"bg-slate-900 border-slate-800"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,m.cn)("rounded-xl flex items-center justify-center shadow-lg",p?"w-12 h-12 bg-slate-900 shadow-slate-900/10":"w-10 h-10 bg-gradient-to-br from-primary-start to-primary-end shadow-primary-start/20"),children:(0,s.jsx)(n.Sparkles,{className:(0,m.cn)("w-5 h-5","text-white")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:(0,m.cn)("font-bold text-sm",p?"text-slate-900 text-lg":"text-white"),children:p?"AI Concierge":"AI Assistant"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:(0,m.cn)("w-2 h-2 rounded-full animate-pulse",A?"bg-green-500":"bg-red-400")}),(0,s.jsx)("p",{className:(0,m.cn)("text-xs font-medium",p?"text-slate-500":"text-slate-400"),children:A?p?"Active & Ready":"Online Now":"Connecting..."})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[N&&p&&(0,s.jsx)("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 text-xs font-semibold rounded-full border border-slate-200 hidden md:inline-block",children:"Dev Mode"}),(0,s.jsx)(u.Button,{variant:"ghost",size:"icon",onClick:E,className:(0,m.cn)("rounded-full",p?"text-slate-400 hover:text-red-500 hover:bg-red-50":"text-slate-400 hover:text-white hover:bg-white/10"),title:"Clear history",children:(0,s.jsx)(h.Trash2,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50",children:[0===y.length?(0,s.jsxs)("div",{className:(0,m.cn)("flex flex-col items-center justify-center h-full text-center p-6 opacity-0 animate-in fade-in zoom-in duration-500 fill-mode-forwards",{"opacity-100":!0}),children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white rounded-3xl shadow-xl flex items-center justify-center mb-4 border border-slate-100",children:(0,s.jsx)(i.Bot,{className:"w-8 h-8 text-primary-start"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"How can I help you?"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm max-w-[250px] mx-auto leading-relaxed mb-6",children:"I can check bookings, answer questions, or help you navigate."}),(0,s.jsx)("div",{className:(0,m.cn)("grid gap-2 w-full",p?"grid-cols-1 sm:grid-cols-2 max-w-lg":"grid-cols-1"),children:["Check pricing","How does it work?","Book a demo"].map(e=>(0,s.jsx)("button",{onClick:()=>{w(e)},className:"px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm text-slate-600 hover:border-primary-start hover:text-primary-start hover:shadow-md transition-all text-left truncate",children:e},e))})]}):y.map((e,t)=>(0,s.jsx)("div",{className:(0,m.cn)("flex w-full animate-in fade-in slide-in-from-bottom-2 duration-300","user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:(0,m.cn)("flex max-w-[85%] gap-2","user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,s.jsx)("div",{className:(0,m.cn)("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm mt-1","user"===e.role?"bg-slate-200":"bg-white border border-slate-100 text-primary-start"),children:"user"===e.role?(0,s.jsx)("div",{className:"w-full h-full rounded-full bg-slate-200"}):(0,s.jsx)(i.Bot,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:(0,m.cn)("p-3 rounded-2xl text-sm leading-relaxed shadow-sm","user"===e.role?"bg-slate-900 text-white rounded-tr-none":"bg-white text-slate-700 border border-slate-100 rounded-tl-none",e.error&&"bg-red-50 text-red-600 border-red-200"),children:[e.content,(0,s.jsx)("div",{className:(0,m.cn)("text-[10px] mt-1 opacity-50","user"===e.role?"text-slate-300":"text-slate-400"),children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},t)),v&&(0,s.jsx)("div",{className:"flex justify-start animate-in fade-in",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-100 flex items-center justify-center flex-shrink-0 shadow-sm text-primary-start mt-1",children:(0,s.jsx)(i.Bot,{className:"w-5 h-5"})}),(0,s.jsx)("div",{className:"bg-white p-3 rounded-2xl rounded-tl-none border border-slate-100 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"})]})})]})}),(0,s.jsx)("div",{ref:B})]}),(0,s.jsxs)("div",{className:(0,m.cn)("p-3 bg-white border-t border-slate-100",p?"p-4":"p-3"),children:[(0,s.jsxs)("form",{onSubmit:D,className:"flex items-end gap-2 p-1 bg-slate-50 border border-slate-200 rounded-[1.5rem] focus-within:ring-2 focus-within:ring-primary-start/20 focus-within:border-primary-start transition-all shadow-sm",children:[(0,s.jsx)(u.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{M?I(!1):(I(!0),setTimeout(()=>{I(!1),alert("Voice recording feature coming soon!")},1e3))},className:(0,m.cn)("rounded-full w-9 h-9 flex-shrink-0 hover:bg-slate-200 text-slate-500 transition-colors",M&&"bg-red-100 text-red-500 hover:bg-red-200"),title:"Voice Input (Coming Soon)",children:M?(0,s.jsx)(c,{className:"w-4 h-4"}):(0,s.jsx)(d.Mic,{className:"w-4 h-4"})}),(0,s.jsx)(x.Input,{value:b,onChange:e=>w(e.target.value),placeholder:"Type a message...",disabled:v,className:"flex-1 border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 px-2 py-2 h-auto max-h-24 min-h-[40px] text-sm text-slate-900 placeholder:text-slate-400",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())}}),(0,s.jsx)(u.Button,{type:"submit",disabled:v||!b.trim(),className:(0,m.cn)("rounded-full w-9 h-9 p-0 flex items-center justify-center transition-all flex-shrink-0",b.trim()?"bg-primary-start hover:bg-primary-end shadow-md scale-100":"bg-slate-300 scale-90 opacity-70"),children:v?(0,s.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin text-white"}):(0,s.jsx)(l,{className:"w-4 h-4 text-white ml-0.5"})})]}),(0,s.jsx)("div",{className:"text-center mt-2",children:(0,s.jsx)("p",{className:"text-[10px] text-slate-400",children:"Powered by ScriptishRx AI"})})]})]})}e.s(["default",()=>p],39736)},6396,e=>{"use strict";var t=e.i(48277),s=e.i(39736);function a(){return(0,t.jsx)("div",{className:"h-full",children:(0,t.jsx)(s.default,{isDashboard:!0})})}e.s(["default",()=>a])}]);