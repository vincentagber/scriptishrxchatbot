(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,216,e=>{"use strict";let t=(0,e.i(35884).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],216)},42350,e=>{"use strict";let t=(0,e.i(35884).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],42350)},49449,e=>{"use strict";let t=(0,e.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],49449)},3333,e=>{"use strict";let t=(0,e.i(35884).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],3333)},66463,e=>{"use strict";let t=(0,e.i(35884).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],66463)},99507,e=>{"use strict";let t=(0,e.i(35884).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>t],99507)},80380,e=>{"use strict";let t=(0,e.i(35884).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],80380)},30704,e=>{"use strict";let t=(0,e.i(35884).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],30704)},82087,e=>{"use strict";let t=(0,e.i(35884).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],82087)},29150,e=>{"use strict";let t=(0,e.i(35884).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],29150)},68698,e=>{"use strict";var t=e.i(48277),a=e.i(30668),s=e.i(35884);let r=(0,s.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),l=(0,s.default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);var o=e.i(99507),n=e.i(30704),i=e.i(80380);let d=(0,s.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var c=e.i(67494);let x=(0,s.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),h=(0,s.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var m=e.i(82087),u=e.i(97599),p=e.i(66463),g=e.i(87635),b=e.i(216),f=e.i(42350),y=e.i(3333),w=e.i(54133);let j=(0,s.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var v=e.i(32425),N=e.i(49449),k=e.i(29150);let C=(0,s.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function S({message:e,type:s,onClose:r}){return(0,a.useEffect)(()=>{let e=setTimeout(r,3e3);return()=>clearTimeout(e)},[r]),(0,t.jsxs)("div",{className:`fixed top-4 right-4 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg transform transition-all animate-in slide-in-from-right-5 fade-in duration-300 ${"success"===s?"bg-green-50 text-green-800 border border-green-100":"bg-red-50 text-red-800 border border-red-100"}`,children:["success"===s?(0,t.jsx)(b.Check,{className:"w-5 h-5 text-green-600"}):(0,t.jsx)(f.AlertCircle,{className:"w-5 h-5 text-red-600"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e}),(0,t.jsx)("button",{onClick:r,className:"p-1 hover:bg-black/5 rounded-full transition-colors",children:(0,t.jsx)(g.X,{className:"w-4 h-4 opacity-50"})})]})}function P({isOpen:e,onClose:s}){let[r,l]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e&&c()},[e]);let c=async()=>{d(!0);try{let e=await fetch("http://localhost:5000/api/settings/audit-logs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){let t=await e.json();l(t)}}catch(e){console.error(e)}finally{d(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl p-6 h-[600px] flex flex-col transform transition-all animate-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b border-gray-100 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-slate-100 rounded-lg",children:(0,t.jsx)(n.Shield,{className:"w-5 h-5 text-slate-700"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"System Audit Logs"})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,t.jsx)(g.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:o?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-gray-300"})}):0===r.length?(0,t.jsx)("p",{className:"text-center text-gray-400 py-10",children:"No activity recorded yet."}):r.map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between p-3 rounded-xl hover:bg-slate-50 border border-transparent hover:border-slate-100 transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sm text-slate-800",children:e.action}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.details||"No details"}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 mt-1 font-mono uppercase",children:e.id})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded-md",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:new Date(e.createdAt).toLocaleTimeString()})]})]},e.id))})]})}):null}function M({name:e,description:a,connectedKey:s,integrations:r,onConnectClick:l,onDisconnectClick:o,loading:n,icon:d}){let c=r[s],x=!!c&&(!0===c||!0===c.connected),h=n===s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-xl transition-all hover:border-gray-300 bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`p-3 rounded-xl ${x?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"}`,children:d?(0,t.jsx)(d,{className:"w-6 h-6"}):(0,t.jsx)("div",{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-900",children:e}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:a})]})]}),(0,t.jsx)("button",{onClick:()=>x?o(s):l(s),disabled:h,className:`flex items-center px-4 py-2 rounded-lg text-xs font-bold transition-all duration-200 min-w-[100px] justify-center
                    ${x?"bg-red-50 text-red-600 hover:bg-red-100":"bg-black text-white hover:bg-gray-800 shadow-md hover:shadow-lg"} ${h?"opacity-80 cursor-wait":""}`,children:h?(0,t.jsx)(i.Loader2,{className:"w-3 h-3 animate-spin mr-1"}):x?(0,t.jsx)(t.Fragment,{children:"Disconnect"}):(0,t.jsx)(t.Fragment,{children:"Connect"})})]})}function A({isOpen:e,onClose:a,onSave:s}){return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-6 transform transition-all animate-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Create Workflow"}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,t.jsx)(g.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.target);s({name:t.get("name"),trigger:t.get("trigger"),action:t.get("action")})},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Workflow Name"}),(0,t.jsx)("input",{name:"name",type:"text",required:!0,placeholder:"e.g. New Client Welcome",className:"w-full p-3 bg-gray-50 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-black/5 outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Trigger Event"}),(0,t.jsxs)("select",{name:"trigger",className:"w-full p-3 bg-gray-50 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-black/5 outline-none",children:[(0,t.jsx)("option",{value:"new_client",children:"New Lead Captured"}),(0,t.jsx)("option",{value:"booking_confirmed",children:"Booking Scheduled"}),(0,t.jsx)("option",{value:"payment_failed",children:"Payment Failed"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Action"}),(0,t.jsxs)("select",{name:"action",className:"w-full p-3 bg-gray-50 border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-black/5 outline-none",children:[(0,t.jsx)("option",{value:"send_email",children:"Send Email"}),(0,t.jsx)("option",{value:"send_sms",children:"Send SMS"}),(0,t.jsx)("option",{value:"notify_team",children:"Notify Team (Slack)"})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"px-5 py-2.5 text-sm font-bold text-gray-500 hover:bg-gray-50 rounded-xl transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-5 py-2.5 text-sm font-bold text-white bg-black hover:bg-gray-800 rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Save Workflow"})]})]})]})}):null}function z({plan:e,showToast:a}){let s=async()=>{try{let e=await fetch("http://localhost:5000/api/payments/portal",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){let{url:t}=await e.json();window.location.href=t}else a("Failed to initiate billing portal.","error")}catch(e){console.error(e),a("Network error.","error")}};return(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-8 mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6 border-b border-gray-100 pb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg",children:(0,t.jsx)(j,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Subscription & Billing"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your plan and payment methods."})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Current Plan"}),(0,t.jsx)("h3",{className:"text-2xl font-extrabold text-slate-900",children:e}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Next billing date: Jan 1, 2026"})]}),(0,t.jsxs)("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-white border border-slate-300 shadow-sm text-slate-700 font-bold rounded-xl hover:bg-slate-50 hover:border-slate-400 transition-all",children:["Manage Billing on Stripe ",(0,t.jsx)(C,{className:"w-4 h-4"})]})]})]})}function B(){let[e,s]=(0,a.useState)(!0),[g,b]=(0,a.useState)(!1),[f,C]=(0,a.useState)(null),B=(e,t)=>{C({message:e,type:t})},[T,U]=(0,a.useState)(!1),[$,F]=(0,a.useState)(!1),[I,O]=(0,a.useState)({isOpen:!1,type:null}),[L,D]=(0,a.useState)(null),[E,H]=(0,a.useState)({}),[V,J]=(0,a.useState)([]),[W,q]=(0,a.useState)({brandColor:"#000000",aiName:"",logoUrl:"",customSystemPrompt:"",plan:"Basic"}),[_,K]=(0,a.useState)({name:"",email:"",phoneNumber:"",avatarUrl:""}),[R,X]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),G=(0,a.useRef)(null),[Z,Q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Y(),ee()},[]);let Y=async()=>{let e=localStorage.getItem("token");try{let t=await fetch("http://localhost:5000/api/settings",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();if(q({brandColor:e.tenant?.brandColor||"#000000",aiName:e.tenant?.aiName||"",logoUrl:e.tenant?.logoUrl||"",customSystemPrompt:e.tenant?.customSystemPrompt||"",plan:e.tenant?.plan||"Basic"}),e.tenant?.integrations)try{H(JSON.parse(e.tenant.integrations))}catch(e){}K({name:e.name||"",email:e.email,phoneNumber:e.phoneNumber||"",avatarUrl:e.avatarUrl||""})}}catch(e){console.error("Failed to fetch settings:",e),B("Failed to load settings.","error")}finally{s(!1)}},ee=async()=>{try{let e=await fetch("http://localhost:5000/api/workflows",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){let t=await e.json();J(t)}}catch(e){console.error("Failed to fetch workflows",e)}},et=async()=>{let e,t,a;if(e=_.email,!/\S+@\S+\.\S+/.test(e))return B("Please enter a valid email address.","error");if(!(!(t=_.phoneNumber)||/^\+?[0-9\s-()]+$/.test(t)))return B("Please enter a valid phone number.","error");if(W.logoUrl&&!(!(a=W.logoUrl)||/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(a)))return B("Please enter a valid Logo URL.","error");b(!0);let s=localStorage.getItem("token");try{await fetch("http://localhost:5000/api/settings/tenant",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(W)}),await fetch("http://localhost:5000/api/settings/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({name:_.name,email:_.email,phoneNumber:_.phoneNumber})}),B("Settings saved successfully!","success")}catch(e){console.error(e),B("Failed to save settings.","error")}finally{b(!1)}},ea=async()=>{if(R.newPassword!==R.confirmPassword)return B("New passwords do not match.","error");if(R.newPassword.length<6)return B("Password must be at least 6 characters.","error");b(!0);let e=localStorage.getItem("token");try{let t=await fetch("http://localhost:5000/api/settings/password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({currentPassword:R.currentPassword,newPassword:R.newPassword})});if(t.ok)B("Password changed successfully.","success"),X({currentPassword:"",newPassword:"",confirmPassword:""});else{let e=await t.json();B(e.error||"Failed to change password.","error")}}catch(e){console.error(e),B("An unexpected error occurred.","error")}finally{b(!1)}},es=async e=>{U(!1);try{(await fetch("http://localhost:5000/api/workflows",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).ok?(B("Workflow created successfully!","success"),ee()):B("Failed to create workflow.","error")}catch(e){B("Network error.","error")}},er=async e=>{if(confirm("Delete this workflow?"))try{(await fetch(`http://localhost:5000/api/workflows/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&(B("Workflow deleted.","success"),ee())}catch(e){B("Failed to delete.","error")}},el=async e=>{let t=e.target.files?.[0];if(!t)return;Q(!0);let a=new FormData;a.append("avatar",t);let s=localStorage.getItem("token");try{let e=await fetch("http://localhost:5000/api/upload/avatar",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:a});if(e.ok){let t=await e.json();K(e=>({...e,avatarUrl:t.avatarUrl})),B("Profile picture updated!","success")}}catch(e){console.error("Avatar upload failed:",e),B("Failed to upload image.","error")}finally{Q(!1)}},eo=e=>{if("Advanced"!==W.plan)return B("Upgrade to Advanced to use integrations.","error");en(e,{})},en=async(e,t)=>{O(e=>({...e,isOpen:!1}));let a=localStorage.getItem("token");D(e),await new Promise(e=>setTimeout(e,1500));let s={...E,[e]:{connected:!0,connectedAt:new Date().toISOString(),...t}};try{(await fetch("http://localhost:5000/api/settings/integrations",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({integrations:JSON.stringify(s)})})).ok?(H(s),B(`${e} connected successfully!`,"success")):B("Failed to update integration status.","error")}catch(e){console.error(e),B("Network error.","error")}finally{D(null),O({isOpen:!1,type:null})}},ei=async e=>{let t=localStorage.getItem("token");D(e);let a={...E,[e]:{connected:!1}};try{(await fetch("http://localhost:5000/api/settings/integrations",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({integrations:JSON.stringify(a)})})).ok&&(H(a),B("Disconnected successfully.","success"))}catch(e){B("Network error.","error")}finally{D(null)}},[ed,ec]=(0,a.useState)("Profile");if(e)return(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-[#F3F4F6]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(i.Loader2,{className:"w-10 h-10 animate-spin text-blue-600"}),(0,t.jsx)("p",{className:"text-gray-500 font-medium animate-pulse",children:"Loading settings..."})]})});let ex="Advanced"===W.plan||"Enterprise"===W.plan;return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto pb-20 relative px-4 md:px-8",children:[f&&(0,t.jsx)(S,{message:f.message,type:f.type,onClose:()=>C(null)}),(0,t.jsx)(A,{isOpen:T,onClose:()=>U(!1),onSave:es}),(0,t.jsx)(P,{isOpen:$,onClose:()=>F(!1)}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Settings"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your account preferences and configurations."})]}),(0,t.jsxs)("button",{onClick:et,disabled:g,className:"flex items-center px-6 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 transition-all shadow-blue-200 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none",children:[g?(0,t.jsx)(i.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}):(0,t.jsx)(r,{className:"w-5 h-5 mr-2"}),"Save Changes"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-64 bg-slate-50/50 border-b md:border-b-0 md:border-r border-slate-100 p-4 flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible",children:["Profile","Branding","AI","Integrations","Security","Billing"].map(e=>(0,t.jsxs)("button",{onClick:()=>ec(e),className:`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all whitespace-nowrap
                                ${ed===e?"bg-white text-blue-600 shadow-md shadow-blue-50 border border-blue-50":"text-slate-500 hover:bg-white hover:text-slate-700 hover:shadow-sm"}`,children:["Profile"===e&&(0,t.jsx)(c.User,{className:"w-4 h-4"}),"Branding"===e&&(0,t.jsx)(l,{className:"w-4 h-4"}),"AI"===e&&(0,t.jsx)(o.Bot,{className:"w-4 h-4"}),"Integrations"===e&&(0,t.jsx)(x,{className:"w-4 h-4"}),"Security"===e&&(0,t.jsx)(n.Shield,{className:"w-4 h-4"}),"Billing"===e&&(0,t.jsx)(j,{className:"w-4 h-4"}),e]},e))}),(0,t.jsxs)("div",{className:"flex-1 p-6 md:p-10 overflow-y-auto",children:["Profile"===ed&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Personal Profile"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Update your photo and personal details."})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start p-6 bg-slate-50/50 rounded-2xl border border-slate-100",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsxs)("div",{onClick:()=>G.current?.click(),className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-lg cursor-pointer group hover:border-blue-50 transition-all",children:[(0,t.jsx)("img",{src:_.avatarUrl?_.avatarUrl.startsWith("http")?_.avatarUrl:`http://localhost:5000${_.avatarUrl}`:`https://ui-avatars.com/api/?name=${_.name}&background=0D8ABC&color=fff`,alt:"Avatar",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)(d,{className:"w-8 h-8 text-white drop-shadow-md"})}),Z&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-white"})})]}),(0,t.jsx)("input",{type:"file",ref:G,onChange:el,className:"hidden",accept:"image/*"}),(0,t.jsx)("button",{onClick:()=>G.current?.click(),className:"text-sm font-semibold text-blue-600 hover:text-blue-700",children:"Change Photo"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Full Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all font-medium text-gray-900",value:_.name,onChange:e=>K({..._,name:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"email",className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all font-medium text-gray-900",value:_.email,onChange:e=>K({..._,email:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Phone Number"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Phone,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"tel",className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all font-medium text-gray-900",value:_.phoneNumber,onChange:e=>K({..._,phoneNumber:e.target.value}),placeholder:"+1 (555) 555-5555"})]})]})]})]})]}),"Branding"===ed&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Company Branding"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Customize the look and feel of your client portal."})]}),(0,t.jsxs)("div",{className:"p-6 bg-slate-50/50 rounded-2xl border border-slate-100 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Brand Color"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("input",{type:"color",className:"w-14 h-14 rounded-xl cursor-pointer border-none p-0 overflow-hidden shadow-sm",value:W.brandColor,onChange:e=>q({...W,brandColor:e.target.value})}),(0,t.jsx)("div",{className:"absolute inset-0 ring-1 ring-black/10 rounded-xl pointer-events-none"})]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none font-mono text-sm uppercase",value:W.brandColor,onChange:e=>q({...W,brandColor:e.target.value})})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Logo URL"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none font-medium text-gray-900",placeholder:"https://example.com/logo.png",value:W.logoUrl,onChange:e=>q({...W,logoUrl:e.target.value})}),W.logoUrl&&(0,t.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 bg-white border border-gray-100 rounded-lg shadow-sm",children:(0,t.jsx)("img",{src:W.logoUrl,alt:"Preview",className:"h-6 w-6 object-contain",onError:e=>e.target.style.display="none"})})]})]})]})]}),"AI"===ed&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"AI Configuration"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Tailor your AI assistant's persona and instructions."})]}),(0,t.jsxs)("div",{className:"p-6 bg-slate-50/50 rounded-2xl border border-slate-100 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Assistant Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.Bot,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none font-medium text-gray-900",value:W.aiName,onChange:e=>q({...W,aiName:e.target.value}),placeholder:"e.g. BizBot 9000"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Custom System Prompt"}),!ex&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded-full border border-amber-100",children:[(0,t.jsx)(h,{className:"w-3 h-3"})," Growth/Enterprise Feature"]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("textarea",{className:`w-full p-4 bg-white border border-gray-200 rounded-xl text-sm h-40 focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none resize-none leading-relaxed ${!ex?"blur-[2px] select-none pointer-events-none opacity-50":"text-gray-900"}`,placeholder:"Enter detailed instructions for your AI agent...",value:W.customSystemPrompt,onChange:e=>q({...W,customSystemPrompt:e.target.value})}),!ex&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("button",{className:"bg-white shadow-xl px-4 py-2 rounded-xl text-xs font-bold text-gray-800 flex items-center gap-2 border border-gray-100 hover:scale-105 transition-transform",children:"Upgrade to Edit"})})]})]})]})]}),"Integrations"===ed&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Integrations & Workflows"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Connect your tools and automate tasks."})]}),(0,t.jsxs)("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white text-xs font-bold rounded-lg hover:bg-black transition-colors shadow-lg shadow-gray-200",children:[(0,t.jsx)(y.Plus,{className:"w-3.5 h-3.5"})," New Workflow"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(M,{name:"Google Calendar",description:"Two-way sync for bookings.",connectedKey:"googleCalendar",integrations:E,onConnectClick:eo,onDisconnectClick:ei,loading:L,icon:w.Calendar}),(0,t.jsx)(M,{name:"Stripe Payments",description:"Accept payments & send invoices.",connectedKey:"stripe",integrations:E,onConnectClick:eo,onDisconnectClick:ei,loading:L,icon:j}),(0,t.jsx)(M,{name:"Mailchimp",description:"Sync client emails automatically.",connectedKey:"mailchimp",integrations:E,onConnectClick:eo,onDisconnectClick:ei,loading:L,icon:m.Mail})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-gray-900 mb-4 border-b border-gray-100 pb-2",children:"Active Workflows"}),0===V.length?(0,t.jsxs)("div",{className:"p-8 text-center bg-slate-50 border border-dashed border-slate-200 rounded-2xl",children:[(0,t.jsx)(p.Activity,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"No custom workflows yet."})]}):(0,t.jsx)("div",{className:"space-y-3",children:V.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-xl flex items-center justify-between group hover:border-blue-200 hover:shadow-sm transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center text-blue-600",children:(0,t.jsx)(v.Zap,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-900 text-sm",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 capitalize",children:[e.trigger.replace(/_/g," ")," â†’ ",e.action.replace(/_/g," ")]})]})]}),(0,t.jsx)("button",{onClick:()=>er(e.id),className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:(0,t.jsx)(N.Trash2,{className:"w-4 h-4"})})]},e.id))})]})]}),"Security"===ed&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Security Settings"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Manage password and access logs."})]}),(0,t.jsxs)("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-600 text-xs font-bold rounded-lg hover:bg-slate-200 transition-colors",children:[(0,t.jsx)(k.FileText,{className:"w-3.5 h-3.5"})," View Audit Logs"]})]}),(0,t.jsx)("div",{className:"p-6 bg-slate-50/50 rounded-2xl border border-slate-100 space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Current Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"password",className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all font-medium text-gray-900",value:R.currentPassword,onChange:e=>X({...R,currentPassword:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"New Password"}),(0,t.jsx)("input",{type:"password",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all font-medium text-gray-900",value:R.newPassword,onChange:e=>X({...R,newPassword:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all font-medium text-gray-900",value:R.confirmPassword,onChange:e=>X({...R,confirmPassword:e.target.value})})]})]}),(0,t.jsx)("div",{className:"pt-2 flex justify-end",children:(0,t.jsx)("button",{onClick:ea,disabled:!R.currentPassword||!R.newPassword,className:"px-6 py-2 bg-slate-800 text-white text-sm font-bold rounded-xl hover:bg-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Update Password"})})]})})]}),"Billing"===ed&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Billing & Subscription"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Manage your plan and payment methods."})]}),(0,t.jsx)(z,{plan:W.plan,showToast:B})]})]})]})]})}e.s(["default",()=>B],68698)}]);