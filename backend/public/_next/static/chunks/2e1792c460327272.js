(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3333,e=>{"use strict";let t=(0,e.i(35884).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],3333)},49449,e=>{"use strict";let t=(0,e.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],49449)},216,e=>{"use strict";let t=(0,e.i(35884).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],216)},42350,e=>{"use strict";let t=(0,e.i(35884).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],42350)},71137,e=>{"use strict";let t=(0,e.i(35884).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],71137)},63532,e=>{"use strict";var t=e.i(48277),a=e.i(30668),l=e.i(3333),s=e.i(32890),r=e.i(97599),n=e.i(49449),i=e.i(71137),o=e.i(216),c=e.i(42350),d=e.i(87635);function u({message:e,type:l,onClose:s}){return(0,a.useEffect)(()=>{let e=setTimeout(s,3e3);return()=>clearTimeout(e)},[s]),(0,t.jsxs)("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg transform transition-all animate-in slide-in-from-right-5 fade-in duration-300 ${"success"===l?"bg-green-50 text-green-800 border border-green-100":"bg-red-50 text-red-800 border border-red-100"}`,children:["success"===l?(0,t.jsx)(o.Check,{className:"w-5 h-5 text-green-600"}):(0,t.jsx)(c.AlertCircle,{className:"w-5 h-5 text-red-600"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e}),(0,t.jsx)("button",{onClick:s,className:"p-1 hover:bg-black/5 rounded-full transition-colors",children:(0,t.jsx)(d.X,{className:"w-4 h-4 opacity-50"})})]})}function x(){let[e,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[x,h]=(0,a.useState)(!1),[m,g]=(0,a.useState)({name:"",email:"",phone:"",notes:""}),[p,y]=(0,a.useState)(null),f=(e,t)=>y({message:e,type:t}),[j,b]=(0,a.useState)(null),[N,v]=(0,a.useState)(!1),k=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let t=await fetch("/api/clients",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=t.headers.get("content-type");if(e&&e.includes("application/json")){let e=await t.json();o(e.clients||[])}else console.error("Received non-JSON response from API")}}catch(e){console.error("Error fetching clients:",e)}finally{d(!1)}};(0,a.useEffect)(()=>{k();let e=setInterval(k,1e4);return()=>clearInterval(e)},[]);let w=async e=>{if(confirm(`Call ${e.name}?`))try{let t=localStorage.getItem("token");f("Initiating call...","success"),(await fetch("/api/voice/outbound",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({to:e.phone,context:{name:e.name,id:e.id}})})).ok?f("Call initiated successfully!","success"):f("Failed to initiate call.","error")}catch(e){console.error("Call error:",e),f("Network error on call.","error")}},C=async()=>{if(!m.name||!m.email)return f("Name and Email are required.","error");try{let e=localStorage.getItem("token"),t=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(m)});if(t.ok)h(!1),g({name:"",email:"",phone:"",notes:""}),k(),f("Client added successfully!","success");else{let e=await t.json();f(e.error||"Failed to add client.","error")}}catch(e){console.error("Error adding client:",e),f("Network error occurred.","error")}},S=async e=>{if(confirm("Are you sure you want to delete this client?"))try{let t=localStorage.getItem("token");(await fetch(`/api/clients/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(k(),f("Client deleted successfully.","success")):f("Failed to delete client.","error")}catch(e){console.error("Error deleting client:",e),f("Network error occurred.","error")}},A=async()=>{if(!j||!j.name||!j.email)return f("Name and Email are required.","error");try{let e=localStorage.getItem("token"),t=await fetch(`/api/clients/${j.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(j)});if(t.ok)v(!1),b(null),k(),f("Client updated successfully!","success");else{let e=await t.json();f(e.error||"Failed to update client.","error")}}catch(e){console.error("Error updating client:",e),f("Network error occurred.","error")}};return(0,t.jsxs)("div",{className:"space-y-6 pb-10",children:[p&&(0,t.jsx)(u,{message:p.message,type:p.type,onClose:()=>y(null)}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Clients"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Manage your client base"})]}),(0,t.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800 transition-colors",children:[(0,t.jsx)(l.Plus,{className:"w-4 h-4 mr-2"}),"Add Client"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-100 flex gap-4",children:(0,t.jsxs)("div",{className:"flex-1 flex items-center bg-gray-50 px-4 py-2 rounded-xl",children:[(0,t.jsx)(s.Search,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search clients...",className:"ml-3 bg-transparent outline-none w-full text-sm"})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50 text-gray-500",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Contact"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Last Visit"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center text-gray-500 gap-2",children:[(0,t.jsx)(r.Phone,{className:"w-3 h-3"}),e.phone,(0,t.jsx)("button",{onClick:()=>w(e),className:"p-1 hover:bg-green-50 text-green-600 rounded-full transition-colors",title:"Call Client",children:(0,t.jsx)(r.Phone,{className:"w-3 h-3 fill-current"})})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-600",children:"Active"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{b(e),v(!0)},className:"p-2 hover:bg-gray-100 rounded-lg text-gray-400 hover:text-blue-600",children:(0,t.jsx)(i.Edit2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>S(e.id),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-400 hover:text-red-600",children:(0,t.jsx)(n.Trash2,{className:"w-4 h-4"})})]})]},e.id))})]})})]}),x&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-3xl w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Client"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Name",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:m.name,onChange:e=>g({...m,name:e.target.value})}),(0,t.jsx)("input",{type:"email",placeholder:"Email",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:m.email,onChange:e=>g({...m,email:e.target.value})}),(0,t.jsx)("input",{type:"tel",placeholder:"Phone",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:m.phone,onChange:e=>g({...m,phone:e.target.value})}),(0,t.jsx)("textarea",{placeholder:"Notes",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:m.notes,onChange:e=>g({...m,notes:e.target.value})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-50 rounded-xl",children:"Cancel"}),(0,t.jsx)("button",{onClick:C,className:"px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800",children:"Save Client"})]})]})]})}),N&&j&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-3xl w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Client"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:j.name,onChange:e=>b({...j,name:e.target.value})}),(0,t.jsx)("input",{type:"email",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:j.email,onChange:e=>b({...j,email:e.target.value})}),(0,t.jsx)("input",{type:"tel",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:j.phone,onChange:e=>b({...j,phone:e.target.value})}),(0,t.jsx)("textarea",{className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:j.notes||"",onChange:e=>b({...j,notes:e.target.value})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-50 rounded-xl",children:"Cancel"}),(0,t.jsx)("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Save Changes"})]})]})]})})]})}e.s(["default",()=>x])}]);