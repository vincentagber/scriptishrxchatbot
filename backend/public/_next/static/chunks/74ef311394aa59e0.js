(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43938,e=>{"use strict";let t=(0,e.i(35884).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],43938)},216,e=>{"use strict";let t=(0,e.i(35884).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],216)},42350,e=>{"use strict";let t=(0,e.i(35884).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],42350)},3333,e=>{"use strict";let t=(0,e.i(35884).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],3333)},49449,e=>{"use strict";let t=(0,e.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],49449)},71137,e=>{"use strict";let t=(0,e.i(35884).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],71137)},35719,e=>{"use strict";let t=(0,e.i(35884).default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);e.s(["Video",()=>t],35719)},26226,e=>{"use strict";var t=e.i(48277),s=e.i(30668),a=e.i(3333),r=e.i(54133),l=e.i(43938),n=e.i(49449),i=e.i(71137),o=e.i(216),c=e.i(42350),d=e.i(87635),u=e.i(35719);function g({title:e,description:s,icon:a,actionLabel:r,onAction:l}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center border-2 border-dashed border-gray-200 rounded-3xl bg-gray-50/50",children:[(0,t.jsx)("div",{className:"p-4 bg-white rounded-2xl shadow-sm mb-4",children:(0,t.jsx)(a,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e}),(0,t.jsx)("p",{className:"text-gray-500 max-w-sm mb-6",children:s}),r&&l&&(0,t.jsx)("button",{onClick:l,className:"px-6 py-2.5 bg-black text-white font-medium rounded-xl hover:bg-gray-800 transition-colors shadow-lg shadow-black/5",children:r})]})}function x({message:e,type:a,onClose:r}){return(0,s.useEffect)(()=>{let e=setTimeout(r,3e3);return()=>clearTimeout(e)},[r]),(0,t.jsxs)("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg transform transition-all animate-in slide-in-from-right-5 fade-in duration-300 ${"success"===a?"bg-green-50 text-green-800 border border-green-100":"bg-red-50 text-red-800 border border-red-100"}`,children:["success"===a?(0,t.jsx)(o.Check,{className:"w-5 h-5 text-green-600"}):(0,t.jsx)(c.AlertCircle,{className:"w-5 h-5 text-red-600"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e}),(0,t.jsx)("button",{onClick:r,className:"p-1 hover:bg-black/5 rounded-full transition-colors",children:(0,t.jsx)(d.X,{className:"w-4 h-4 opacity-50"})})]})}function h(){let[e,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[h,m]=(0,s.useState)(!1),[p,b]=(0,s.useState)({clientId:"",date:"",time:"",purpose:"",meetingLink:""}),[y,f]=(0,s.useState)(null),k=(e,t)=>f({message:e,type:t}),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[C,S]=(0,s.useState)({date:"",time:"",purpose:"",status:"",meetingLink:""}),L=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let t=await fetch("/api/bookings",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=t.headers.get("content-type");if(e&&e.includes("application/json")){let e=await t.json();o(e.bookings||[])}else console.error("Received non-JSON response from API")}}catch(e){console.error("Error fetching bookings:",e)}},I=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let t=await fetch("/api/clients",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=t.headers.get("content-type");if(e&&e.includes("application/json")){let e=await t.json();d(e.clients||[])}}}catch(e){console.error("Error fetching clients:",e)}};(0,s.useEffect)(()=>{L(),I();let e=setInterval(L,1e4);return()=>clearInterval(e)},[]);let T=async()=>{if(!p.clientId||!p.date||!p.time)return k("Please fill in all required fields.","error");try{let e=localStorage.getItem("token"),t=new Date(`${p.date}T${p.time}`),s=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({clientId:p.clientId,date:t.toISOString(),purpose:p.purpose,meetingLink:p.meetingLink||void 0})});if(s.ok)m(!1),b({clientId:"",date:"",time:"",purpose:"",meetingLink:""}),L(),k("Booking created successfully!","success");else{let e=await s.json();k(e.error||"Failed to create booking.","error")}}catch(e){console.error("Error adding booking:",e),k("Network error occurred.","error")}},B=async e=>{if(confirm("Are you sure you want to delete this booking?"))try{let t=localStorage.getItem("token");(await fetch(`/api/bookings/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(L(),k("Booking deleted successfully.","success")):k("Failed to delete booking.","error")}catch(e){console.error("Error deleting booking:",e),k("Network error occurred.","error")}},M=async()=>{if(N)try{let e=localStorage.getItem("token"),t=new Date(`${C.date}T${C.time}`),s=await fetch(`/api/bookings/${N.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({date:t.toISOString(),purpose:C.purpose,status:C.status,meetingLink:C.meetingLink||void 0})});if(s.ok)v(!1),w(null),L(),k("Booking updated successfully!","success");else{let e=await s.json();k(e.error||"Failed to update booking.","error")}}catch(e){console.error("Error updating booking:",e),k("Network error occurred.","error")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[y&&(0,t.jsx)(x,{message:y.message,type:y.type,onClose:()=>f(null)}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Bookings"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Manage appointments"})]}),(0,t.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800 transition-colors",children:[(0,t.jsx)(a.Plus,{className:"w-4 h-4 mr-2"}),"New Booking"]})]}),0===e.length?(0,t.jsx)(g,{title:"No bookings yet",description:"Get started by scheduling your first appointment with a client.",icon:r.Calendar,actionLabel:"New Booking",onAction:()=>m(!0)}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-xl",children:(0,t.jsx)(r.Calendar,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{let t;return t=new Date(e.date),void(w(e),S({date:t.toISOString().split("T")[0],time:t.toTimeString().slice(0,5),purpose:e.purpose||"",status:e.status,meetingLink:e.meetingLink||""}),v(!0))},className:"p-1 hover:bg-gray-100 text-gray-400 hover:text-blue-600 rounded",children:(0,t.jsx)(i.Edit2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>B(e.id),className:"p-1 hover:bg-red-50 text-red-400 hover:text-red-600 rounded",children:(0,t.jsx)(n.Trash2,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"Scheduled"===e.status?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:e.status})]})]}),(0,t.jsx)("h3",{className:"font-bold text-lg mb-1",children:e.client?.name||"Unknown Client"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:e.purpose}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(l.Clock,{className:"w-4 h-4 mr-2"}),new Date(e.date).toLocaleString()]}),e.meetingLink&&(0,t.jsxs)("a",{href:e.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold hover:bg-blue-100 transition-colors",children:[(0,t.jsx)(u.Video,{className:"w-3.5 h-3.5"}),"Join"]})]})]},e.id))}),h&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-3xl w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"New Booking"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("select",{className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:p.clientId,onChange:e=>b({...p,clientId:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Select Client"}),c.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"date",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:p.date,onChange:e=>b({...p,date:e.target.value})}),(0,t.jsx)("input",{type:"time",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:p.time,onChange:e=>b({...p,time:e.target.value})})]}),(0,t.jsx)("input",{type:"text",placeholder:"Purpose (e.g., Consultation)",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:p.purpose,onChange:e=>b({...p,purpose:e.target.value})}),(0,t.jsx)("input",{type:"url",placeholder:"Meeting Link (optional - auto-generates with Google Calendar)",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:p.meetingLink,onChange:e=>b({...p,meetingLink:e.target.value})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-50 rounded-xl",children:"Cancel"}),(0,t.jsx)("button",{onClick:T,className:"px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800",children:"Save Booking"})]})]})]})}),j&&N&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-3xl w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Booking"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-gray-100 rounded-xl text-gray-500",children:["Client: ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:N.client?.name})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"date",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:C.date,onChange:e=>S({...C,date:e.target.value})}),(0,t.jsx)("input",{type:"time",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:C.time,onChange:e=>S({...C,time:e.target.value})})]}),(0,t.jsx)("input",{type:"text",placeholder:"Purpose",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:C.purpose,onChange:e=>S({...C,purpose:e.target.value})}),(0,t.jsxs)("select",{className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:C.status,onChange:e=>S({...C,status:e.target.value}),children:[(0,t.jsx)("option",{value:"Scheduled",children:"Scheduled"}),(0,t.jsx)("option",{value:"Completed",children:"Completed"}),(0,t.jsx)("option",{value:"Cancelled",children:"Cancelled"})]}),(0,t.jsx)("input",{type:"url",placeholder:"Meeting Link (e.g., Google Meet, Zoom)",className:"w-full p-3 bg-gray-50 rounded-xl outline-none focus:ring-2 focus:ring-black/5",value:C.meetingLink,onChange:e=>S({...C,meetingLink:e.target.value})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-50 rounded-xl",children:"Cancel"}),(0,t.jsx)("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Save Changes"})]})]})]})})]})}e.s(["default",()=>h],26226)}]);