(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66463,e=>{"use strict";let t=(0,e.i(35884).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],66463)},66730,e=>{"use strict";let t=(0,e.i(35884).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],66730)},99507,e=>{"use strict";let t=(0,e.i(35884).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>t],99507)},6305,e=>{"use strict";let t=(0,e.i(35884).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],6305)},99325,e=>{"use strict";function t(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=t);return a}e.s(["clsx",()=>t])},26550,e=>{"use strict";var t=e.i(48277),s=e.i(30668),a=e.i(41428);let r=s.forwardRef(({className:e,type:s,...r},l)=>(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-12 w-full rounded-xl glass bg-white/5 px-4 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-start/50 disabled:cursor-not-allowed disabled:opacity-50 text-white placeholder:text-white/40",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},12011,e=>{"use strict";e.i(39057);var t=e.i(48277),s=e.i(30668),a=e.i(97599),r=e.i(66463),l=e.i(6305),i=e.i(35884);let o=(0,i.default)("phone-outgoing",[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var n=e.i(66730),c=e.i(99507);let d=(0,i.default)("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),h=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var x=e.i(9693),g=e.i(26550);let m="http://localhost:5000";function u(){let[e,i]=(0,s.useState)([]),[u,p]=(0,s.useState)(!0),[y,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[N,j]=(0,s.useState)(`${m}/api/webhooks/voice`),[w,k]=(0,s.useState)(!1),[S,A]=(0,s.useState)("idle"),[C,M]=(0,s.useState)(""),[I,P]=(0,s.useState)({aiName:"",welcomeMessage:"",customSystemPrompt:"",model:"gpt-4"}),[T,z]=(0,s.useState)(!1),[B,R]=(0,s.useState)(!1),H=()=>{let e={"Content-Type":"application/json"},t=localStorage.getItem("token");return t&&(e.Authorization=`Bearer ${t}`),e};(0,s.useEffect)(()=>{D()},[]);let D=async()=>{await Promise.all([L(),O()]),p(!1)},L=async()=>{try{let e=await fetch(`${m}/api/organization/info`,{headers:H()});if(e.ok){let t=await e.json();if(t.success&&t.organization){let e=t.organization;P({aiName:e.aiConfig?.aiName||e.aiName||"ScriptishRx Assistant",welcomeMessage:e.aiConfig?.welcomeMessage||e.aiWelcomeMessage||"Hello, how can I help you today?",customSystemPrompt:e.aiConfig?.systemPrompt||e.customSystemPrompt||"You are a helpful assistant.",model:e.aiConfig?.model||"gpt-4"}),e.twilioConfig?.phoneNumber&&v(e.twilioConfig.phoneNumber)}}}catch(e){console.error("Error fetching org info:",e)}},O=async()=>{try{let e=await fetch(`${m}/api/voice/logs`,{headers:H()});if(e.ok){let t=await e.json(),s=[];Array.isArray(t)?s=t:t.logs&&(s=t.logs),i(s)}}catch(e){console.error("Error fetching logs:",e)}},$=async()=>{z(!0);try{(await fetch(`${m}/api/organization/info`,{method:"PATCH",headers:H(),body:JSON.stringify({aiName:I.aiName,aiWelcomeMessage:I.welcomeMessage,customSystemPrompt:I.customSystemPrompt,aiConfig:{aiName:I.aiName,welcomeMessage:I.welcomeMessage,systemPrompt:I.customSystemPrompt,model:I.model}})})).ok?alert("AI Agent configuration saved successfully!"):alert("Failed to save configuration")}catch(e){console.error("Error saving config:",e),alert("Error saving configuration")}finally{z(!1)}},E=async()=>{if(f){R(!0);try{(await fetch(`${m}/api/organization/info`,{method:"PATCH",headers:H(),body:JSON.stringify({twilioConfig:{phoneNumber:f}})})).ok?alert("Inbound number updated! Please ensure your Twilio webhook is set pointing to this server."):alert("Failed to save inbound number")}catch(e){console.error("Error saving inbound:",e)}finally{R(!1)}}},V=async e=>{e.preventDefault();let t=y.trim();if(t){k(!0),A("idle");try{let e=await fetch(`${m}/api/voice/outbound`,{method:"POST",headers:H(),body:JSON.stringify({to:t})}),s=await e.json();if(!e.ok)throw Error(s.message||s.error||"Call failed");A("success"),M("Call initiated! Your AI agent will answer."),b(""),setTimeout(O,2e3)}catch(e){console.error("Call error:",e),A("error"),M(e.message)}finally{k(!1)}}};return(0,t.jsxs)("div",{className:"space-y-8 max-w-7xl mx-auto pb-12",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Voice Agent Studio"}),(0,t.jsx)("p",{className:"text-gray-500 mt-2",children:"Design, train, and manage your business's dedicated AI voice concierge."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-7 space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-600 text-white rounded-lg shadow-sm",children:(0,t.jsx)(c.Bot,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"AI Personality & Logic"}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mt-0.5",children:"Customize how the AI thinks and speaks."})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"Agent Name"}),(0,t.jsx)(g.Input,{value:I.aiName,onChange:e=>P({...I,aiName:e.target.value}),placeholder:"e.g. Sarah from Front Desk",className:"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"AI Model"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:I.model,onChange:e=>P({...I,model:e.target.value}),className:"w-full h-10 px-3 pr-8 rounded-md border border-gray-300 bg-white text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer",children:[(0,t.jsx)("option",{value:"gpt-4",children:"GPT-4 (Recommended)"}),(0,t.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Fastest)"})]}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:(0,t.jsx)(n.Settings,{className:"w-4 h-4"})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"Welcome Message"}),(0,t.jsx)(g.Input,{value:I.welcomeMessage,onChange:e=>P({...I,welcomeMessage:e.target.value}),placeholder:"e.g. Thanks for calling ScriptishRx. How can I help?",className:"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400 focus:border-blue-500 focus:ring-blue-500"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"The first sentence the AI speaks when answering a call."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"System Instructions (Prompt)"}),(0,t.jsx)("textarea",{value:I.customSystemPrompt,onChange:e=>P({...I,customSystemPrompt:e.target.value}),placeholder:"Describe your business, operating hours, and how the AI should handle different scenarios...",className:"w-full min-h-[240px] p-4 rounded-xl border border-gray-300 bg-white text-gray-900 placeholder:text-gray-400 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y leading-relaxed"}),(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 flex items-start gap-2",children:[(0,t.jsx)(n.Settings,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,t.jsx)("strong",{children:"Pro Tip:"}),' Be explicit about your business hours, cancellation policies, and services. The AI will use this "brain" to answer questions intelligently.']})]})]}),(0,t.jsxs)(x.Button,{onClick:$,disabled:T,className:"w-full h-12 bg-gray-900 hover:bg-black text-white rounded-xl font-semibold shadow-lg shadow-gray-200 transition-all hover:-translate-y-0.5",children:[T?(0,t.jsx)(r.Activity,{className:"w-5 h-5 animate-spin mr-2"}):(0,t.jsx)(l.Save,{className:"w-5 h-5 mr-2"}),T?"Saving Changes...":"Save AI Configuration"]})]})]})}),(0,t.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-600 text-white rounded-lg shadow-sm",children:(0,t.jsx)(d,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Inbound Configuration"}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mt-0.5",children:"Set up your business phone line."})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"Your Twilio Phone Number"}),(0,t.jsx)(g.Input,{value:f,onChange:e=>v(e.target.value),placeholder:"+1 (555) 123-4567",className:"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"Webhook URL"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g.Input,{readOnly:!0,value:N,className:"bg-gray-50 border-gray-300 text-gray-500 text-xs font-mono"}),(0,t.jsx)(x.Button,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(N),alert("Copied to clipboard!")},className:"px-3",children:(0,t.jsx)(h,{className:"w-4 h-4"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:'Paste this URL into the "Voice Webhook" field in your Twilio Console.'})]}),(0,t.jsx)(x.Button,{onClick:E,disabled:B||!f,className:"w-full bg-purple-600 hover:bg-purple-700 text-white rounded-xl",children:B?"Saving...":"Link Inbound Number"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-600 text-white rounded-lg shadow-sm",children:(0,t.jsx)(o,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Outbound Call Console"}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mt-0.5",children:"Reach clients directly through your AI Agent."})]})]}),(0,t.jsx)("div",{className:"p-6 space-y-5",children:(0,t.jsxs)("form",{onSubmit:V,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-800",children:"Destination Number"}),(0,t.jsx)(g.Input,{placeholder:"+1 (555) 000-0000",value:y,onChange:e=>b(e.target.value),className:"h-11 text-base bg-white border-gray-300 text-gray-900 placeholder:text-gray-400 focus:border-green-500 focus:ring-green-500"})]}),(0,t.jsx)(x.Button,{type:"submit",className:"w-full h-11 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-md shadow-green-100 transition-all active:scale-95",disabled:w||!y,children:w?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Activity,{className:"w-4 h-4 animate-spin"})," Dialing..."]}):"Dial Number"}),"success"===S&&(0,t.jsx)("div",{className:"p-3 bg-green-50 text-green-700 rounded-lg text-sm font-medium text-center border border-green-100 animate-in fade-in slide-in-from-top-2",children:C}),"error"===S&&(0,t.jsx)("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm text-center border border-red-100 animate-in fade-in slide-in-from-top-2",children:C})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-200 shadow-sm flex flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1 tracking-tight",children:e.length}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider font-semibold",children:"Calls Logged"})]}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl border border-gray-200 shadow-sm flex flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1 tracking-tight",children:"Active"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider font-semibold",children:"System Status"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-200 overflow-hidden mt-8",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.Activity,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:"Call History"})]}),(0,t.jsx)(x.Button,{variant:"ghost",onClick:O,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"Refresh Logs"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Number"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Summary / Response"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-8 py-12 text-center text-gray-500",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(a.Phone,{className:"w-6 h-6 text-gray-400"})}),(0,t.jsx)("p",{className:"font-medium",children:"No call activity recorded yet."}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Initiate a verification call to activate the log history."})]})})}):e.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-blue-50/30 transition-colors group",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`inline-flex px-2.5 py-1 rounded-md text-xs font-bold uppercase tracking-wider border ${"completed"===e.status?"bg-green-50 text-green-700 border-green-100":"bg-gray-50 text-gray-600 border-gray-100"}`,children:e.status||"Completed"})}),(0,t.jsx)("td",{className:"px-6 py-4 font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:e.phoneNumber||e.to||"Unknown"}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-600 max-w-md truncate",children:e.summary||"Start of conversation..."}),(0,t.jsx)("td",{className:"px-6 py-4 text-right text-gray-500 text-sm font-mono",children:new Date(e.timestamp||e.createdAt).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},s))})]})})]})]})}e.s(["default",()=>u],12011)}]);